# SuperBirdID v3.2.1 Release Notes

**发布日期**: 2025-10-23
**版本**: v3.2.1
**类型**: Enhancement Release（体验改进）

---

## 🎉 主要改进

### 国家列表按鸟种数量智能排序

**改进**: 国家下拉列表现在按照离线数据库中的鸟种数量降序排列

**优势**:
- ✅ 鸟类多样性高的国家优先显示（哥伦比亚1983种、秘鲁1920种、巴西1874种等）
- ✅ 更符合观鸟爱好者的使用习惯
- ✅ 快速找到鸟类资源丰富的拍摄地
- ✅ 有离线数据的51个国家显示鸟种数量，方便用户了解

**显示格式**:
```
有数据国家: 哥伦比亚 (CO) - 1983种
无数据国家: 阿富汗 (AF)
```

**排序逻辑**:
1. 有离线数据的国家（51个）按鸟种数量降序
2. 无离线数据的国家（202个）按英文名字母顺序
3. 两组顺序合并显示

---

## 📊 鸟种数量 Top 10

| 排名 | 国家 | 代码 | 鸟种数量 |
|------|------|------|---------|
| 1 | 🇨🇴 哥伦比亚 | CO | 1983 种 |
| 2 | 🇵🇪 秘鲁 | PE | 1920 种 |
| 3 | 🇧🇷 巴西 | BR | 1874 种 |
| 4 | 🇮🇩 印度尼西亚 | ID | 1806 种 |
| 5 | 🇺🇸 美国 | US | 1747 种 |
| 6 | 🇪🇨 厄瓜多尔 | EC | 1711 种 |
| 7 | 🇮🇳 印度 | IN | 1447 种 |
| 8 | 🇧🇴 玻利维亚 | BO | 1437 种 |
| 9 | 🇨🇳 中国 | CN | 1427 种 |
| 10 | 🇻🇪 委内瑞拉 | VE | 1415 种 |

---

## 🔧 技术实现

### 数据统计
- 从51个国家的离线 eBird 数据中统计鸟种数量
- 更新 `ebird_regions.json` 添加 `species_count` 字段
- 自动化统计，数据准确可靠

### GUI 改进
- 国家列表加载时智能分组排序
- 有数据国家显示鸟种数量
- 无数据国家按字母排序放在后面

---

## 📦 版本信息

所有组件版本号统一为 **v3.2.1**:

| 组件 | 版本 |
|------|------|
| GUI (SuperBirdID_GUI.py) | 3.2.1 ✅ |
| API (SuperBirdID_API.py) | 3.2.1 ✅ |
| Core (SuperBirdId.py) | 3.2.1 ✅ |
| Lightroom Plugin (Info.lua) | 3.2.1 ✅ |
| Lightroom Plugin (显示文本) | v3.2.1 - 慧眼识鸟 Lightroom 插件 ✅ |
| App Bundle (Info.plist) | 3.2.1 ✅ |

---

## 🆕 继承自 v3.2.0 的功能

v3.2.1 包含 v3.2.0 的所有改进：

1. **GPS 地理定位精确化**
   - 集成 reverse_geocoder 离线地理数据库
   - 返回准确的国家代码（IS=冰岛, DE=德国等）
   - 完全离线，速度快（<10ms）

2. **Lightroom 插件版本统一**
   - 版本显示 "v3.2.1 - 慧眼识鸟 Lightroom 插件"
   - 品牌名称统一

3. **DMG 安装包**
   - 包含 Lightroom_Plugins 目录快捷方式
   - 安装更便捷

---

## 📝 完整更新日志

### 新增
- 国家列表按鸟种数量智能排序
- 有离线数据的国家显示鸟种数量

### 改进
- 优化用户体验，常用国家更容易找到
- GUI 国家选择界面更直观

### 数据
- 为 253 个国家添加 species_count 字段
- 51 个国家有真实鸟种统计数据

---

## 🐛 已知问题

### 无重大问题

v3.2.1 经过充分测试，未发现重大 bug。

---

## 📦 安装说明

### 新用户

直接安装 v3.2.1 即可，无特殊要求。

### 从 v3.2.0 升级

**无需特殊操作**，直接覆盖安装即可：
1. 下载 `SuperBirdID-v3.2.1.dmg`
2. 打开 DMG
3. 拖拽 `SuperBirdID.app` 到 Applications 文件夹（覆盖旧版）
4. 重新安装 Lightroom 插件（如果使用）

**配置保留**:
- GUI 配置（国家/地区设置）会自动保留
- eBird 离线数据会自动保留
- 无需重新设置

---

## 🔍 测试验证

### GUI 测试

- ✅ 国家列表按鸟种数量正确排序
- ✅ 前10名是鸟类多样性最高的国家
- ✅ 有数据国家显示鸟种数量
- ✅ 无数据国家按字母排序
- ✅ 配置保存和加载正常

---

## 📈 性能影响

### 包大小

| 版本 | DMG 大小 | 变化 |
|------|---------|------|
| v3.2.0 | 318 MB | - |
| v3.2.1 | 318 MB | 无变化 |

### 加载速度

- 国家列表加载速度无明显变化
- 排序操作在毫秒级完成
- 用户体验无影响

---

## 🚀 下一步

### v3.2.2 (维护更新)

计划改进：
- 补充更多国家的离线数据
- 优化国家列表显示样式
- 改进错误处理

### v3.3.0 (功能更新)

潜在新功能：
- 批量识别性能优化
- 更多 eBird 数据源
- 自定义识别参数
- 识别历史记录

---

## 📞 支持信息

**GitHub**: https://github.com/yourusername/SuperBirdID
**Issues**: https://github.com/yourusername/SuperBirdID/issues
**文档**: DMG 中包含完整文档

---

## 🎊 致谢

感谢所有用户的反馈和建议！

v3.2.1 的改进源于用户对更好体验的追求。

---

**文件**: `SuperBirdID-v3.2.1.dmg`
**大小**: 318 MB
**SHA256**: `247688dc9650ec8b2dde7f91263a7f0276d4fb58ec79d74e0500333f63358ce5`
**签名**: ✅ 已签名（等待公证）

**发布日期**: 2025-10-23
**下载**: [GitHub Releases](https://github.com/yourusername/SuperBirdID/releases/tag/v3.2.1)
